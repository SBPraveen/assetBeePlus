import { s3Upload } from '../cloudFunctions/index.js';
import { generateQrCode } from './generateQrCode.js';
import { deleteQrCode } from './deleteQrCode.js';

//Generates QR code and uploads it to S3 bucket
export const uploadQrCode = async (asset, wrappedConsole) => {
  let genQr = await generateQrCode(asset, wrappedConsole);
  let uploadQr = genQr && (await s3Upload(genQr, `${asset.internalId}.png`, wrappedConsole));
  let deleteQr = genQr && (await deleteQrCode(`./src/uploadQrCode/tempQrCodes/${asset.internalId}.png`, wrappedConsole));
  return genQr && uploadQr && deleteQr;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzM1VwbG9hZCIsImdlbmVyYXRlUXJDb2RlIiwiZGVsZXRlUXJDb2RlIiwidXBsb2FkUXJDb2RlIiwiYXNzZXQiLCJ3cmFwcGVkQ29uc29sZSIsImdlblFyIiwidXBsb2FkUXIiLCJpbnRlcm5hbElkIiwiZGVsZXRlUXIiXSwic291cmNlcyI6WyIuLi8uLi9zcmMvdXBsb2FkUXJDb2RlL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHMzVXBsb2FkIH0gZnJvbSAnLi4vY2xvdWRGdW5jdGlvbnMvaW5kZXguanMnXG5pbXBvcnQgeyBnZW5lcmF0ZVFyQ29kZSB9IGZyb20gJy4vZ2VuZXJhdGVRckNvZGUuanMnXG5pbXBvcnQgeyBkZWxldGVRckNvZGUgfSBmcm9tICcuL2RlbGV0ZVFyQ29kZS5qcydcblxuLy9HZW5lcmF0ZXMgUVIgY29kZSBhbmQgdXBsb2FkcyBpdCB0byBTMyBidWNrZXRcbmV4cG9ydCBjb25zdCB1cGxvYWRRckNvZGUgPSAgYXN5bmMoYXNzZXQsIHdyYXBwZWRDb25zb2xlKSA9PiB7XG4gICAgbGV0IGdlblFyID0gYXdhaXQgZ2VuZXJhdGVRckNvZGUoYXNzZXQsIHdyYXBwZWRDb25zb2xlKVxuICAgIGxldCB1cGxvYWRRciA9IGdlblFyICYmIGF3YWl0IHMzVXBsb2FkKGdlblFyLCBgJHthc3NldC5pbnRlcm5hbElkfS5wbmdgLCB3cmFwcGVkQ29uc29sZSlcbiAgICBsZXQgZGVsZXRlUXIgPSBnZW5RciAmJiBhd2FpdCBkZWxldGVRckNvZGUoYC4vc3JjL3VwbG9hZFFyQ29kZS90ZW1wUXJDb2Rlcy8ke2Fzc2V0LmludGVybmFsSWR9LnBuZ2AsIHdyYXBwZWRDb25zb2xlKVxuICAgIHJldHVybiBnZW5RciAmJiB1cGxvYWRRciAmJiBkZWxldGVRclxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxRQUFRLFFBQVEsNEJBQTRCO0FBQ3JELFNBQVNDLGNBQWMsUUFBUSxxQkFBcUI7QUFDcEQsU0FBU0MsWUFBWSxRQUFRLG1CQUFtQjs7QUFFaEQ7QUFDQSxPQUFPLE1BQU1DLFlBQVksR0FBSSxNQUFBQSxDQUFNQyxLQUFLLEVBQUVDLGNBQWMsS0FBSztFQUN6RCxJQUFJQyxLQUFLLEdBQUcsTUFBTUwsY0FBYyxDQUFDRyxLQUFLLEVBQUVDLGNBQWMsQ0FBQztFQUN2RCxJQUFJRSxRQUFRLEdBQUdELEtBQUssS0FBSSxNQUFNTixRQUFRLENBQUNNLEtBQUssRUFBRyxHQUFFRixLQUFLLENBQUNJLFVBQVcsTUFBSyxFQUFFSCxjQUFjLENBQUM7RUFDeEYsSUFBSUksUUFBUSxHQUFHSCxLQUFLLEtBQUksTUFBTUosWUFBWSxDQUFFLGtDQUFpQ0UsS0FBSyxDQUFDSSxVQUFXLE1BQUssRUFBRUgsY0FBYyxDQUFDO0VBQ3BILE9BQU9DLEtBQUssSUFBSUMsUUFBUSxJQUFJRSxRQUFRO0FBQ3hDLENBQUMifQ==